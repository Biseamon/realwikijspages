<!DOCTYPE html>
<html>
    <head>
        <title>Blueberry : SonarQube Plan</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Blueberry</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Information_36144018.html">DevOps Information</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Blueberry : SonarQube Plan
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Duncan Forsyth</span>, last modified on Jun 26, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="SonarQubePlan-WhatbenefitscanwehopeforwithSonarQube"><strong><u>What benefits can we hope for with SonarQube</u></strong></h1><p> SonarQube is a tool which, amongst other things:</p><ul><li>Finds bugs in code</li><li>Is particularly good at finding faults in CSS that would only be revealed under specific browsers</li><li>Provides a limited ability to find security concerns</li><li>Puts focus on the use of cheap and efficient automated unit-testing</li><li>Can potentially be used as a customer-friendly reports</li><li>Provides something that we can point at when asked about our quality assurance initiatives</li><li>Reports on code that is potentially confusing to read</li><li>Could potentially help QA find projects that are in particular need of a quality assurance intervention</li></ul><p>The last point in the list above is important to the Quality Assurance function in getting “situational awareness” of the upcoming challenges to quality assurance. We will also be planning PTS tools to assist in that job.</p><p><strong>QA is very keen to see SonarQube used. Blueberry Systems has been pushing for it to be used on all projects as a key indicator for project governance.</strong></p><p>It is available at <a class="external-link" href="https://sonar.bbconsult.co.uk/" rel="nofollow">https://sonar.bbconsult.co.uk</a> . LDAP passwords should work, and the admin password is in LastPass.</p><p>SonarQube is undergoing a lot of rapid community development, so upgrades are risky. Its feature set is comprised of both paid-for and freely-licensed plugins. A lot of the BBWT2 technologies have freely licensed scanners. Not all projects will be so fortunate.</p><h1 id="SonarQubePlan-WhereWeAreToday"><strong><u>Where We Are Today</u></strong></h1><p> </p><ul><li>Many years ago we started using Jenkins as a deployment engine.</li><ul><li>This largely came about as a response to one project’s need to get automated deployment working quickly. It wasn’t part of a considered deployment strategy. But it has worked “well enough” and an in depth examination of what we could do better is a topic for another day.</li></ul><li>Some years ago we more-or-less standardised so that build scripts for websites poll source-control every 15 minutes and perform both a build and deploy to an internal test server if there is a change.</li><ul><li>Unfortunately some people took that template and applied it to their live servers too. We shouldn’t be running SonarQube as part of a build and deploy to live.</li></ul><li>A couple of years ago we put SonarQube into pretty much everyone’s build script</li><li>Last year, in response to an upgrade error and developer feedback, builds were ‘parameterised’ to say whether or not to run SonarQube. This, in turn, wasn’t done very carefully.</li><ul><li>Upgrade error: an unmanaged upversioning of SonarQube by a sysadmin broke many builds</li><li>Developer feedback: running SonarQube on every build put a hiccup in some projects very fast commit-deploy-and-manual-test workflows</li><li>Not very carefully: I don’t think our scripts should <em>deploy</em> when the purpose for the build is SonarQube analysis.</li><li>There is a discussion ongoing on how we can improvement our capability and maturity as regards our build processes.</li></ul><li>We left source-control triggered builds to build <em>without</em> SonarQube. To build <em>with</em> SonarQube. it has to be <em>specifically</em> requested through the Jenkins web interface.</li><li>The consequence has been that projects have largely fallen out of using SonarQube as part of their process.</li><li>We recently acquired a new plugin for Jenkins – a parameterised scheduler. The parameterised scheduler can be told to run the build with the “SonarQube on” parameter. The test project for this (BBWT2) is now doing daily SonarQube builds regardless of developer activity, and without manual intervention from anyone. I believe this is what we need.</li><ul><li>Sadly there’s no easy way of combining the polling check for whether any code has changed with the build parameterisation</li></ul></ul><p><br/> <strong style="font-size: 24.0px;"><u>Plan Going Forward</u></strong></p><p> At Blueberry Consultants, trust in SonarQube seemed damaged when the unmanaged up-versioning broke build scripts. At Blueberry Systems, people aren’t using it as much as they intend.</p><p>The plan is to re-boot the SonarQube initiative. To do that, we’d like to get several projects actively using SonarQube for a few weeks. This will allow QA to resolve any objections with SonarQube, document the answers to any frequently asked questions, etc, before rolling out more widely. On those projects, the use of the parameterised scheduler to ensure analysis would be mandated, and QA would be heavily involved in helping the PMs interpret the output and taking feedback from the developers on false positive issues.</p><h1 id="SonarQubePlan-SQLAnalysis"><strong><u>SQL Analysis</u></strong></h1><p> SQL analysis, where used, is being performed by a TechCognia plugin that’s only compatible with our older SonarQube 5.6 server at <a class="external-link" href="https://sonar563.bbconsult.co.uk/sessions/new" rel="nofollow">https://sonar563.bbconsult.co.uk</a> . We have been told that a newer version exists compatible with 6.1 and 6.2. We're currently on 6.0 at <a class="external-link" href="https://sonar.bbconsult.co.uk" rel="nofollow">https://sonar.bbconsult.co.uk</a> .</p><p>At the moment projects wanting to do SQL analysis have to use the older server. It is possible and currently advisable to split the analysis so that </p><h1 id="SonarQubePlan-GitLab"><u><strong>GitLab</strong></u></h1><p>Experiments are ongoing with GitLab and SonarQube. We have some initial successes with the basic analysis and we’re now striving to achieve input of code coverage and test result data.</p><h1 id="SonarQubePlan-Upversioning"><u><strong>Upversioning</strong></u></h1><p>We're currently on version 6.0 of SonarQube. A 6.4 exists but a plan to upgrade will take 2-4 days and interfere with the plan above. So we'll defer that to a later time.</p><p><em>[ Space here for Tomas to make some notes about his experience trialling a 6.0 to 6.4 upgrade ]</em></p><p><u style="font-size: 24.0px;"><strong>Usage Notes - Bugs</strong></u></p><p>The number of SonarQube detected bugs in the software is a prominent measure. To see those bugs, from the project’s home page, clicking on the yellow-circled link takes you to a list of all the bugs in the project which is easy to work through.</p><p>Clicking on the blue-circled link below will take you to the measures feature, which isn’t very helpful.  </p><p>You will likely find many of the bugs are reported due to failures in CSS compatibility with older browser versions.</p><p><em><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/36144001/36144016.png" data-image-src="attachments/36144001/36144016.png" data-unresolved-comment-count="0" data-linked-resource-id="36144016" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Bugs.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="36144001" data-linked-resource-container-version="2"></span><br/></em></p><p> </p><h1 id="SonarQubePlan-SonarQubePriorityRatings"><u><strong>SonarQube Priority Ratings</strong></u></h1><p>From time to time I try and re-jig SonarQube’s reporting priorities. If you see something that looks out of place, do let <a class="external-link" href="mailto:duncan.forsyth@bbconsult.co.uk" rel="nofollow">duncan.forsyth@bbconsult.co.uk</a> know. Here’s what I aim for:</p><ul><li>Blocker – Security issues, potential crashing</li><li>Critical – Functionality issues – the code doesn’t always do what the developer expected it would</li><li>Major - Major readability and testability issues</li><li>Minor – Minor readability and testability issues</li></ul><h1 id="SonarQubePlan-SonarQubeKnownConcerns"><strong><u>SonarQube Known Concerns</u></strong></h1><p>Why is the duplicated lines count so high? It’s probably targeting some files that it shouldn’t be targeting. Duncan to investigate.</p><p>What are we to do with analysis of third party libraries? We should try and drop this, but we should do a good website scan in its place. Duncan and Tomas to investigate.</p><p>Isn't reporting faults in test code a little much? Yes. There's a way to stop that. Duncan to arrange a demonstration of that.</p><p>Standard reports try and report differences between versions of the work, but we're always telling SonarQube the same version number. Duncan to investigate.</p><p><em><br/></em></p><p> </p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/36144001/36144016.png">Bugs.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Dec 03, 2020 14:51</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
