<!--
title: 85493727
description: 
published: true
date: 2020-12-02T12:00:11.827Z
tags: 
editor: undefined
dateCreated: 2020-12-02T12:00:09.672Z
-->

<!DOCTYPE html>
<html>
    <head>
        <title>Blueberry Group : Amazon Web Services: Deploying a stable stage of an API gateway calling Lambda</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Blueberry Group</a></span>
                            </li>
                                                    <li>
                                <span><a href="Project-Information_85493575.html">Project Information</a></span>
                            </li>
                                                    <li>
                                <span><a href="BVI_85493723.html">BVI</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Blueberry Group : Amazon Web Services: Deploying a stable stage of an API gateway calling Lambda
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Jason Cozza</span> on Nov 24, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><p><br/></p><h2 id="AmazonWebServices:DeployingastablestageofanAPIgatewaycallingLambda-AmazonWebServices:CreateanewversionedLambdaFunction">Amazon Web Services: Create a new versioned Lambda Function</h2><ul><li>First go to the Function console <a class="external-link" href="https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions?display=list" rel="nofollow">https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions?display=list</a> and click on the function name you want to create a new version of.</li><li>On the action menu select Publish new version a pop up will asking to enter a description of the version.</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="400" width="797" src="attachments/85493727/85493737.png" data-image-src="attachments/85493727/85493737.png" data-unresolved-comment-count="0" data-linked-resource-id="85493737" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Function console.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="250" src="attachments/85493727/85493736.png" data-image-src="attachments/85493727/85493736.png" data-unresolved-comment-count="0" data-linked-resource-id="85493736" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Function Action.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span></p><p><br/></p><ul><li>Press the publish button once you added some useful text to the description.</li><li>Once publish you will be sent on the version page of the lambda. Although it says you are now viewing the code of new version it is not the case this is why given a good description of the version is useful to recognize it.<br/>Note that the Qualifiers button change to Version: [id]</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="250" src="attachments/85493727/85493735.png" data-image-src="attachments/85493727/85493735.png" data-unresolved-comment-count="0" data-linked-resource-id="85493735" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Function Version Description.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="250" src="attachments/85493727/85493734.png" data-image-src="attachments/85493727/85493734.png" data-unresolved-comment-count="0" data-linked-resource-id="85493734" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Function Version created.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span></p><p><br/></p><ul><li>Switching from one version to another can be done by pressing  the “Version : [id]” / “Qualifiers” button and selecting the version id on the versions tab.</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="400" width="526" src="attachments/85493727/85493733.png" data-image-src="attachments/85493727/85493733.png" data-unresolved-comment-count="0" data-linked-resource-id="85493733" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Function Version navigation.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span></p><h2 id="AmazonWebServices:DeployingastablestageofanAPIgatewaycallingLambda-AmazonWebServices:CalllambdaonAPIGatewaybyitsversion">Amazon Web Services: Call lambda on API Gateway by its version</h2><ul><li>Go to the AWS API Gateway console and select your API.</li><li>Under resource select the method you want to change lambda version.</li><li>Go to the Integration Request.</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="400" width="495" src="attachments/85493727/85493732.png" data-image-src="attachments/85493727/85493732.png" data-unresolved-comment-count="0" data-linked-resource-id="85493732" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="API Gateway API.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="250" src="attachments/85493727/85493731.png" data-image-src="attachments/85493727/85493731.png" data-unresolved-comment-count="0" data-linked-resource-id="85493731" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="API Gateway Integration Request.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span></p><p><br/></p><ul><li>Click on the Pen next to “Lambda Function” and add “:” + the version id to the function name.</li><li>Press the check mark to save the change.</li><li>Repeat process for all method you’d like to use lambda function.</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="400" width="711" src="attachments/85493727/85493730.png" data-image-src="attachments/85493727/85493730.png" data-unresolved-comment-count="0" data-linked-resource-id="85493730" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="API Gateway Integration Request window.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span></p><p><br/></p><ul><li>Then deploy the api to an existing stage or create a new stage using the action button, Deploy API option.</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="400" src="attachments/85493727/85493729.png" data-image-src="attachments/85493727/85493729.png" data-unresolved-comment-count="0" data-linked-resource-id="85493729" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="API Gateway Action.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="400" src="attachments/85493727/85493728.png" data-image-src="attachments/85493727/85493728.png" data-unresolved-comment-count="0" data-linked-resource-id="85493728" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="API Gateway Stage deployment.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493727" data-linked-resource-container-version="1"></span></p><p>The method will now call the versioned lambda instead of the latest lambda.</p><p><br/></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493728.png">API Gateway Stage deployment.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493729.png">API Gateway Action.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493730.png">API Gateway Integration Request window.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493731.png">API Gateway Integration Request.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493732.png">API Gateway API.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493733.png">Function Version navigation.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493734.png">Function Version created.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493735.png">Function Version Description.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493736.png">Function Action.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493727/85493737.png">Function console.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Dec 02, 2020 11:32</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
