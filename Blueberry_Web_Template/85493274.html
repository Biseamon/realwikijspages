<!--
title: BBWT3 - Progressive Web App (PWA)
description: 
published: true
date: 2020-12-02T14:58:21.521Z
tags: 
editor: undefined
dateCreated: 2020-11-27T11:01:03.353Z
-->

<h1>Blueberry Group : BBWT3 - Progressive Web App (PWA)&nbsp;</h1>
<p>Created by Jason Cozza on Sep 21, 2020</p>
<p>PWA stands for progressive web app. This is an app built from the web technologies we all know, like HTML, CSS, and JavaScript, but with a feel and functionality that rivals an actual native app.</p>
<p>In BBWT3, PWA is presented by&nbsp;<a href="https://gitlab.bbconsult.co.uk/blueberry/bbwt3/-/tree/develop/project/BBWT.Client/src/app/main/modules/pwa">this front-end module</a>&nbsp;that implements basic functionality.</p>
<p>&nbsp;</p>
<p>Here we will describe steps required to set up PWA for local testing.</p>
<h1>PWA Set Up for Local Testing</h1>
<h2>1.&nbsp;Set corresponding origins in the interceptor class.</h2>
<p>Go to&nbsp;<strong>project/BBWT.Client/src/app/bbwt/modules/data-service/api.interceptor.ts</strong>&nbsp;and change variables for origins:</p>
<p><strong>frontEndOrigin&nbsp;</strong>- the origin where you plan to start your HTTP server (about the HTTP server see below).</p>
<p><strong>backEndOrigin</strong>&nbsp;- the origin where your back-end runs.<br><strong>project/BBWT.Client/src/app/bbwt/modules/data-service/api.interceptor.ts</strong></p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td><code>export&nbsp;class</code>&nbsp;<code>ApiInterceptor implements HttpInterceptor {</code><br><code>&nbsp;&nbsp;&nbsp; private</code>&nbsp;<code>readonly</code>&nbsp;<code>frontEndOrigin =&nbsp;"</code><a href="http://localhost:8080/"><code>http://localhost:8080"</code></a><code>; // Origin where the front-end server runs.</code><br><code>&nbsp;&nbsp;&nbsp; private</code>&nbsp;<code>readonly</code>&nbsp;<code>backEndOrigin =&nbsp;"</code><a href="http://localhost:50815/"><code>http://localhost:50815"</code></a><code>; // Origin where the back-end server runs.</code><br><code>&nbsp;&nbsp;&nbsp; private</code>&nbsp;<code>readonly</code>&nbsp;<code>apiUrlSegment =&nbsp;"api/";&nbsp;// A segment within an URL that uniquely identifies an API request.</code><br>&nbsp;<br><code>&nbsp;&nbsp;&nbsp; intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</code><br><code>&nbsp;&nbsp;&nbsp; }</code><br><code>}</code></td>
      </tr>
    </tbody>
  </table>
</figure>
<h2>2. Set the Front-End Origin in Startup</h2>
<p>Set corresponding front-end origin in the&nbsp;<strong>project/BBWT.Server/Startup.cs</strong>&nbsp;to allow CORS handle requests from you front-end:<br><strong>project/BBWT.Server/Startup.cs</strong></p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td><code>if</code>&nbsp;<code>(Environment.IsDevelopment())</code><br><code>{</code><br><code>&nbsp;&nbsp;&nbsp; app.UseCors(p =&gt;</code><br><code>&nbsp;&nbsp;&nbsp; {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p.AllowAnyHeader();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p.AllowAnyMethod();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p.AllowCredentials();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p.WithOrigins("</code><a href="http://localhost:8080/"><code>http://localhost:8080"</code></a><code>);</code><br><code>&nbsp;&nbsp;&nbsp; });</code><br><code>}</code></td>
      </tr>
    </tbody>
  </table>
</figure>
<h2>3. Build Your Front-End in the Production Mode</h2>
<p>Run this command to build the front-end code in&nbsp;<strong>project/BBWT.Client</strong>&nbsp;folder:</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td><code>npm run build:prod</code></td>
      </tr>
    </tbody>
  </table>
</figure>
<p>Compiled sources will be published to the&nbsp;<strong>project/BBWT.Client/wwwroot</strong>&nbsp;folder.</p>
<h2>4. Install “http-server” npm Package</h2>
<p>Run this command to install the package in&nbsp;<strong>project/BBWT.Client</strong>&nbsp;folder:</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td><code>npm install --global http-server</code></td>
      </tr>
    </tbody>
  </table>
</figure>
<h2>5. Start the HTTP Server</h2>
<p>Run these commands to switch to the&nbsp;<strong>wwwroot</strong>&nbsp;folder and start the HTTP server:</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td><code>cd wwwroot</code><br><code>http-server -p 8080 -c-1</code></td>
      </tr>
    </tbody>
  </table>
</figure>
<h2>6. Start the Back-End</h2>
<p>Start the back-end's BBWT.Server project from Visual Studio or CLI.</p>
<h2>7. Visit the Front-End Origin in Browser</h2>
<p>Start your browser and visit the origin where your front-end part is running. On the "Application" tab you may see that Service Worker is enabled:</p>
<figure class="image"><img src="attachments/85493274/85493275.png"></figure>
<h2>Attachments:</h2>
<figure class="image"><img src="images/icons/bullet_blue.gif" alt=""></figure>
<p><a href="attachments/85493274/85493275.png">12.png</a> (image/png)&nbsp;<br>&nbsp;</p>
<p>Document generated by Confluence on Nov 27, 2020 10:56</p>
<p><a href="http://www.atlassian.com/">Atlassian</a></p>
