<!--
title: BBWT2---Features_85492991
description: 
published: true
date: 2020-12-01T15:59:51.619Z
tags: 
editor: undefined
dateCreated: 2020-11-27T11:01:54.930Z
-->

<!DOCTYPE html>
<html>
    <head>
        <title>Blueberry Group : BBWT2 - Features</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Blueberry Group</a></span>
                            </li>
                                                    <li>
                                <span><a href="Blueberry-Web-Template_85492520.html">Blueberry Web Template</a></span>
                            </li>
                                                    <li>
                                <span><a href="BBWT2_85492528.html">BBWT2</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Blueberry Group : BBWT2 - Features
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Jason Cozza</span> on Sep 21, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="attachments/85492991/85492992.jpg" data-image-src="attachments/85492991/85492992.jpg" data-unresolved-comment-count="0" data-linked-resource-id="85492992" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="View Route.jpg" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="85492991" data-linked-resource-container-version="1"></span></span></p><p>Note - any PMs / developers working on these features MUST check with <a class="external-link" href="mailto:developers@bbconsult.co.uk" rel="nofollow">developers@bbconsult.co.uk</a> whether there is an implementation of this already in place</p><p><span style="color: rgb(255,0,0);"><strong>Note - as we are working BBWT3, it is probably better to defer these to BBWT3 development, unless there is a strong reason to imlpement for BBWt2,<br/></strong></span><strong>such as to trial new developers before they learn Angular 4 <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image emoticon emoticon-smile confluence-external-resource" alt="(smile)" src="images/icons/emoticons/smile.png" data-image-src="https://wiki.bbconsult.co.uk/s/en_GB/7109/b3b701b9e2252507726313c2d8313cd50ef12760/_/images/icons/emoticons/smile.png"></span></strong></p><p><br/></p><h1 id="BBWT2-Features-SecurityFixes">Security Fixes</h1><p>We recently ran a web application security checked on BBWT2.  Make sure all the fixes reported by the checker are implemented.  Tomas / Asghar knows about these checkers<br/>and can re-run a check report.</p><p>MG: See <strong><a href="https://wiki.bbconsult.co.uk/display/BLUEB/Web+Site+Security+Checklist" rel="nofollow">Web Site Security Checklist</a></strong></p><p><span style="color: rgb(255,0,0);">MG: A number of these have now been implemented by Diana, Mick and Robert.   <strong>We should make sure they are also implemented in BBWT3<br/></strong></span></p><p><span style="color: rgb(255,0,0);"><strong><br/></strong></span></p><h1 id="BBWT2-Features-IntegrateRun-timeTooltipEditorintoBBWT2">Integrate Run-time Tooltip Editor into BBWT2</h1><p>Mick Astley has implemented run-time tooltip editing into PTS, although at the time of writing it<br/>doesn't include code to make it persistent.  Dhru has a different implementation for GEMS which<br/>is a BBWT2 application.</p><p>Integrating this into BBWT2 would be useful for current BBWT2 projects, and would provide a<br/>possible starting point for a BBWT3 version.</p><p><br/></p><h1 id="BBWT2-Features-Run-timeConfigurationTransferbacktoDB">Run-time Configuration Transfer back to DB</h1><p>Duncan and I have discussed this multiple times, and I’ve explained it to Phil.</p><p>There are situations where we have settings within a live or test copy of BBWT that we’d like <br/>to make persistent:</p><ul><li>We’ve recently invented an interactive tooltip editor – admin user can click on an <br/>actual (i) icon in the web-page and edit the tooltip data.<br/><br/></li><li>We have interactive menu editors in BBWT2.<br/><br/></li></ul><p>The question is how to extract these settings securely and push them back to SVN.  The<br/>problem is that if we include code within the live system which has wide access to SVN, <br/>that’s a security risk. </p><p>I’d note that that there are multiple ways that configuration data can be stored:</p><ul><li>Data like the menu settings is in the DB. </li><li>Tooltip data is currently in JSON and is written by the tooltip editor to the live web server.  <br/>I wasn’t keen to store this in the DB, as this would mean a web-service round trip <br/>per tooltip hover – instead it’s stored in a JSON file which is part of the site pages.  I <br/>suggested that when an admin user edits the tooltips, the system write the new JSON <br/>to the web-server as well as to SVN.  This way any tooltip edit is immediately available <br/>to all users who refresh their cache.   It would be simpler if all configuration data used <br/>the same storage method.  To discuss.</li></ul><p><br/>How to save the code back to SVN?  Options:</p><ul><li>write some code which lives on a secure server or the SVN server, and polls the live <br/>sites looking for changed data.  If it finds it, it updates source files.  Polling isn’t the <br/>best option…<br/><br/></li><li>We have a small web-service on SVN server that handles requests from live sites to <br/>update SVN.  So live system makes a call to our service, passes in details of the <br/>project and file.  The service reads a configuration file from the project validates the <br/>update and checks in the new file version</li></ul><p><br/>The second option works best for me.   Note that this small web-service could be implemented<br/>in  </p><p><br/></p><h1 id="BBWT2-Features-InteractiveValidationEditor">Interactive Validation Editor</h1><p>I’d like to implement an interactive validation rule editor.   This should build on top of the<br/>run-time tooltip editor concept, and use the same control panel properties.</p><p>The basic idea</p><ul><li>Admin user goes into a special mode</li><li>Clicks on an input control in the live system</li><li>A panel appears with a list of validation rule options<ul><li>Min/Max</li><li>Permitted characters</li><li>JavaScript custom validator function</li></ul></li></ul><p> </p><p>There are issues with this</p><ol><li>It needs to integrate with the Angular validation engine - I don't know how complex<br/>that is.<br/><br/></li><li>There are always validation requirements which go beyond the simpler rules.  Maybe <br/>a control validation depends on another control value.   Of course, we can build<br/>the simple version first and extend later.<br/><br/></li><li>Ideally we'd have validation rules we can apply at both client side and server side.</li></ol><p><br/>I think this has a lot of value:  it delegates validation rule configuration to testers and customers <br/>potentially.</p><p><br/>Note - we found that this is defined roughly in BBWT1: <a class="external-link" href="http://bbwt-test.demo.bbconsult.co.uk/Admin/ValidationRules.aspx" rel="nofollow">http://bbwt-test.demo.bbconsult.co.uk/Admin/ValidationRules.aspx</a> and <a class="external-link" href="http://bbwt-test.demo.bbconsult.co.uk/Admin/ValidatedPages.aspx" rel="nofollow">http://bbwt-test.demo.bbconsult.co.uk/Admin/ValidatedPages.aspx</a> but I don’t think anyone seriously used it.</p><p><br/></p><h1 id="BBWT2-Features-WebServicePermissionManagement">Web Service Permission Management</h1><p>In BBWT2, Duncan worked on creating a model for associating permissions with web-services.  It was 80% finished, but the<br/>remaining 20% could do with being done.</p><p>We also created code to display the routes, services and permissions in the GUI:</p><p><a class="external-link" href="https://bbwt2-test.demo.bbconsult.co.uk/#!/admin/routes" rel="nofollow">https://bbwt2-test.demo.bbconsult.co.uk/#!/admin/routes</a></p><p>The routes without a route title are webservices. They seem to start at page 5 if you have 15 items per page.</p><p>(We have a specific webservices page too at <a class="external-link" href="https://bbwt2-test.demo.bbconsult.co.uk/#!/admin/webservices" rel="nofollow">https://bbwt2-test.demo.bbconsult.co.uk/#!/admin/webservices</a> but that’s associated with auditing rather than security. I’m sure a tidyup is needed)</p><p><a class="external-link" href="https://ptsa.bbconsult.co.uk/#/taskEditor?type=3&amp;id=99307" rel="nofollow">https://ptsa.bbconsult.co.uk/#/taskEditor?type=3&amp;id=99307</a> was the task that got the page to where it is today</p><p><u><a class="external-link" href="https://docs.google.com/a/bbconsult.co.uk/document/d/1zI_CuZ2uHcFxTxj1VtnmJF7Sre7lrejzQ_fJbr5rZ7k/edit?usp=sharing" rel="nofollow">https://docs.google.com/a/bbconsult.co.uk/document/d/1zI_CuZ2uHcFxTxj1VtnmJF7Sre7lrejzQ_fJbr5rZ7k/edit?usp=sharing</a></u>  for where I was planning to take this eventually.</p><p><br/></p><p>Note well one vital piece of information from the security review is that PMs are not good at reviewing their site’s security when it comes to thinking in terms of permissions. But they do<br/>just fine when thinking in terms of what <em>roles</em> should have access to the page. The roles column is what people need to review. The permissions column is for getting a detailed understanding<br/>of why the role is showing up as present. The pages/services are actually protected by permissions. The roles which have access are being inferred from those permissions.</p><p>Duncan and I both feel that putting this in the GUI helps PMs to see what security is implemented.</p><p>Note:  this task is different from the next task.  This task is about making it easy to set permission rules.  The next task is about testing that they work.  In theory if this<br/>task works well, the second task might not be required - except that some data access controls aren't set by permissions - for example filtering the data to show only<br/>your company.  Also, being able to show customers visually exactly what the web-service returns for a given query is very valuable.</p><p><br/></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="attachments/85492991/85492992.jpg" data-image-src="attachments/85492991/85492992.jpg" data-unresolved-comment-count="0" data-linked-resource-id="85492992" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="View Route.jpg" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="85492991" data-linked-resource-container-version="1"></span></span></p><p><br/></p><p><br/></p><h1 id="BBWT2-Features-WebServicePermissionReviewScreenMechanism">Web Service Permission Review Screen Mechanism</h1><p>It is currently difficult for testers to tell whether permissions and filters are correctly checked by our web-service<br/>code.</p><p>I suggest that we add a mechanism to BBWT2 to allow testers to review the output of the web-services<br/>interactively and directly:</p><ul><li>Tester logs into BBWT2 site as a user</li><li>Tester goes to a special test page (which must itself be only reachable by testers)</li><li>Tester sees a list of web-services implemented within our code</li><li>Tester can click on a web service</li><li>Perhaps we show a UI to allow tester to pick some values to try?</li><li>Web Service is executed, and results are returned and displayed to the tester (as pure JSON?)</li></ul><p><br/>You could argue that we should have test scripts to do this – you’d be right.   But test scripts aren’t<br/>necessarily visible to the PM – this makes the testing much more ‘in your face’</p><p>A variation on this is to provide an interactive way to actually specify test cases, which can then be<br/>automatically run on each user?   Again, we’re re-inventing the testing wheel a bit?</p><p>Let’s think:</p><p>                For each web-service, we have some JSON specification of the web-service parameters</p><p>                We allow a user to create a grid / table of test cases for the web-service, and expected<br/>                return values maybe</p><p>                We allow user to run all test cases against all APIs for a set of users.   It produces an<br/>                output report showing the data returned and any failures</p><p>                Human tester can review the report and see if there are anomalies</p><p><br/></p><p>Note:  we're using xUnit for BBWT3 unit testing - it's possible we can integrate with this, so our<br/>interactive test code runs the unit tests?  Needs more research</p><p>I feel very strongly that putting things like this on an admin menu makes a vast difference to whether<br/>PMs will look at the data.  Maybe I’m wrong <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image emoticon emoticon-smile confluence-external-resource" alt="(smile)" src="images/icons/emoticons/smile.png" data-image-src="https://wiki.bbconsult.co.uk/s/en_GB/7109/b3b701b9e2252507726313c2d8313cd50ef12760/_/images/icons/emoticons/smile.png"></span></p><p><br/></p><h1 id="BBWT2-Features-GenericLookupTable">Generic Lookup Table</h1><p>This is in BBWT1.  Duncan thought the implementation looked ugly.... I'm not quite sure this matters<br/>very much - this would be used for admin only.</p><p>There are some issues with this feature</p><ol><li>Although many lookup tables are just ID, value, some are more complex.  Some have<br/>ID, value1, value2.   Some are hierarchical.<br/><br/></li><li>The rules for deletion and edit are non-trivial<ol><li>In some cases, we may want to disallow deletion if there is an active reference<br/>to the lookup value anywhere else in the system</li><li>In some cases, we may want to have an inactive flag which hides the value<br/>from parts of the UI</li><li>Is the “value” the primary key?  If I delete a value, and then add the same<br/>value back, does it have the same ID or a new ID?</li><li>If we want to do this fully generically, and we want to allow users to be able to edit<br/>values in the list with a nice UI, then we start to need a meta-schema potentially.</li></ol></li></ol><p><br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="attachments/85492991/85492993.jpg" data-image-src="attachments/85492991/85492993.jpg" data-unresolved-comment-count="0" data-linked-resource-id="85492993" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Lookup.jpg" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="85492991" data-linked-resource-container-version="1"></span></span></p><p>The downside is that VME is already implementing this using per-table screens.</p><p><br/></p><h1 id="BBWT2-Features-LockingStrategies">Locking Strategies</h1><p>Currently we don't demonstrate one.</p><p>According to Robert Smith, we're applying neither an optimistic locking strategy nor a pessimistic locking strategy. </p><p>We might want to look at <a class="external-link" href="https://blogs.msdn.microsoft.com/marcelolr/2010/07/22/odata-and-optimistic-concurrency/" rel="nofollow">https://blogs.msdn.microsoft.com/marcelolr/2010/07/22/odata-and-optimistic-concurrency/</a> .</p><p><span style="color: rgb(255,0,0);">MG: Not sure what this relates to - I think it's multi-user record updates?</span></p><p><br/></p><h1 id="BBWT2-Features-FeedbackIntegration">Feedback Integration</h1><p>Integrate Paul Gerald's Feedback tool into BBWT - but make it optional, so it can be turned off.</p><p><br/></p><h1 id="BBWT2-Features-AJAXIssues">AJAX Issues</h1><p>James Peel saw ajax error issues on slow connections - need to look into this more.</p><p><br/></p><h1 id="BBWT2-Features-OlderTasks"><u><strong>Older Tasks</strong></u></h1><p>These tasks aren't likely to be used in BBWT3, and probably aren't worth implementing in BBWT2</p><h1 id="BBWT2-Features-SourceRearrangement">Source Rearrangement</h1><p>Reorganise BBWT source so that it becomes much easier to delete the demo pages when starting a new project</p><p>DF: Note there is an app to help with this in the repository. It has not been fully tested.</p><p><br/></p><h1 id="BBWT2-Features-IntegratingAnthonyMintPerformanceMonitor">Integrating Anthony Mint Performance Monitor</h1><p>Copy Anthony's Performance Monitoring Code into BBWT Trunk.  </p><p>MG: I think this was assigned to Robert / Johan - but was not completed.   For BBWT3, we'd probably prefer to use external tools.</p><p><br/></p><h1 id="BBWT2-Features-NUnitCodeCoverage">NUnit Code Coverage</h1><p>DF: We have NUnit tests and code coverage metrics being generated from the BBWT2 template. <a class="external-link" href="https://sonar.bbconsult.co.uk/component_measures/metric/coverage/list?id=bbwt2%3Abbwt2" rel="nofollow">https://sonar.bbconsult.co.uk/component_measures/metric/coverage/list?id=bbwt2%3Abbwt2</a></p><p>DF: I'd like us to hit a 50% metric on the BBWT2 template. After which, I'll be proposing that we push all the new BBWT2-based to hit the same metric. This is not an ambitious target. SonarQube is currently reporting 21% (28/09/2016)</p><p>DF: Possible problems: What counts as code for this metric. I'm happy to focus on the back-end initially.</p><p><br/></p><h1 id="BBWT2-Features-SonarQubeBlockersandCriticalIssues">SonarQube Blockers and Critical Issues</h1><p>DF: I'd like to see these reduced to 0 in the BBWT2 template. It is acceptable for some of these to be marked as &quot;Won't fix&quot; or &quot;False positive&quot; subject to review. But I'd them all to be addressed in some form.</p><p><br/></p><h1 id="BBWT2-Features-ImproveBBWT2ReportingDemo">Improve BBWT2 Reporting Demo</h1><p>Bring in demonstration of taking parameters from Keltbray.</p><p><br/></p><h1 id="BBWT2-Features-ImproveBBWT2InstantReports">Improve BBWT2 Instant Reports</h1><p>Complete Steve Moorse's design? <a class="external-link" href="https://docs.google.com/document/d/1K6pkH-SwRKQPg6D1CLJWOLA42wa5feBwqPJ_LC6yskg/edit" rel="nofollow">https://docs.google.com/document/d/1K6pkH-SwRKQPg6D1CLJWOLA42wa5feBwqPJ_LC6yskg/edit</a></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85492991/85492992.jpg">View Route.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85492991/85492993.jpg">Lookup.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 27, 2020 10:56</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
