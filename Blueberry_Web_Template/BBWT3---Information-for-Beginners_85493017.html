<!DOCTYPE html>
<html>
    <head>
        <title>Blueberry Group : BBWT3 - Information for Beginners</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Blueberry Group</a></span>
                            </li>
                                                    <li>
                                <span><a href="Blueberry-Web-Template_85492520.html">Blueberry Web Template</a></span>
                            </li>
                                                    <li>
                                <span><a href="BBWT3_85492530.html">BBWT3</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Blueberry Group : BBWT3 - Information for Beginners
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Jason Cozza</span> on Sep 21, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><ul><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-Introduction" rel="nofollow">Introduction</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-Architecture" rel="nofollow">Architecture</a></span><ul><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-TechnicalArchitecture" rel="nofollow">Technical Architecture</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-CallSequenceofaClientRequest" rel="nofollow">Call Sequence of a Client Request</a></span></li></ul></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-Addinganewfeature" rel="nofollow">Adding a new feature</a></span><ul><li><span class="toc-item-body"><a class="toc-link" rel="nofollow">Back-end's changes</a></span><ul><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-1.Addamodelclasstoproject/BBWT.Data/Model" rel="nofollow">1. Add a model class to project/BBWT.Data/Model</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-2.AddaDbSetforyourmodeltoproject/BBWT.Data" rel="nofollow">2. Add a DbSet for your model to project/BBWT.Data</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-3.Addadatabasemigrationformodelschanges" rel="nofollow">3. Add a database migration for models changes</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-4.AddaDTOtoproject/BBWT.Data/DTO" rel="nofollow">4. Add a DTO to project/BBWT.Data/DTO</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-5.AddamappingbetweenyourmodelandDTO" rel="nofollow">5. Add a mapping between your model and DTO</a></span><ul><li><span class="toc-item-body"><a class="toc-link" rel="nofollow">Approach 1. Add a special mapping method into the model's class</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-Approach2.Createanewmappingprofileclass" rel="nofollow">Approach 2. Create a new mapping profile class</a></span></li></ul></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-6.Addaserviceinterfacetoproject/BBWT.Services" rel="nofollow">6. Add a service interface to project/BBWT.Services</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-7.AddaserviceclasstoBBWT.Services" rel="nofollow">7. Add a service class to BBWT.Services</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-8.Registeryourserviceinproject/BBWT.Services/ServiceCollectionExtension.cs" rel="nofollow">8. Register your service in project/BBWT.Services/ServiceCollectionExtension.cs</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step99.Addacontrollertoproject/BBWT.Server/Api" rel="nofollow">9. Add a controller to project/BBWT.Server/Api</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-10.Addinitialdatatodatabaseinproject/BBWT.InitialData/ProjectInitialData.cs" rel="nofollow">10. Add initial data to database in project/BBWT.InitialData/ProjectInitialData.cs</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-11.Addrouterolesinproject/BBWT.InitialData/RouteRolesDataService.cs" rel="nofollow">11. Add route roles in project/BBWT.InitialData/RouteRolesDataService.cs</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-12.Addaunittesttotest/BBWT.Services.Test" rel="nofollow">12. Add a unit test to test/BBWT.Services.Test</a></span></li></ul></li><li><span class="toc-item-body"><a class="toc-link" rel="nofollow">Front-end's changes</a></span><ul><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-Featureorientedstructure" rel="nofollow">Feature oriented structure </a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-1.Addanentityinterface" rel="nofollow">1. Add an entity interface</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-2.Addaserviceclass" rel="nofollow">2. Add a service class</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-3.AddanAngularcomponent" rel="nofollow">3. Add an Angular component</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-4.AddanAngularmodule" rel="nofollow">4. Add an Angular module</a></span></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-5.Registeryourmoduleinmodulesrouting" rel="nofollow">5. Register your module in modules routing</a></span></li></ul></li><li><span class="toc-item-body"><a class="toc-link" href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-Applicationrun-time" rel="nofollow">Application run-time</a></span><ul><li><span class="toc-item-body"><a class="toc-link" rel="nofollow">1. Add feature's page to menu</a></span></li></ul></li></ul></li></ul><p><br/></p><p><br/></p><h1 id="BBWT3-InformationforBeginners-Introduction">Introduction</h1><p>This document explains how to use BBWT3 to create a basic code for a new feature step by step.</p><p>It requires a basic knowledge of C# and Typescript (interfaces, annotations, generics, etc.). It is not needed to be experienced in ASP.NET Core or EF Core to follow this document.</p><h1 id="BBWT3-InformationforBeginners-Architecture">Architecture</h1><p>BBWT3 relies on this software stack (non-exhaustive list):</p><ul><li>ASP.NET Core</li><li>Entity Framework Core</li><li>MySQL</li><li>MSSQL Server</li><li>Webpack</li><li>Angular / TypeScript</li><li>PrimeNG</li><li>AWS</li><li>Azure</li><li>HangFire</li></ul><p>The source code’s solution uses Visual Studio 2019 and contains these projects that we should focus on:</p><ul><li><strong><strong>project\BBWT.Client</strong> - The front-end code. <br/></strong></li><li><strong><strong><strong>project</strong></strong>\BBWT.Data</strong> - models of data context, DTOs and their mapping profiles.</li><li><strong><strong><strong>project</strong></strong>\BBWT.Data.MySQL</strong> - DB schema migrations for MySQL.</li><li><strong><strong><strong>project</strong></strong>\BBWT.Data.SqlServer</strong> - DB schema migrations for MSSQL Server.</li><li><strong><strong><strong>project</strong></strong>\BBWT.InitialData</strong> - creates/updates all necessary initial DB records; initializes access rules for pages routes; initializes menu.</li><li><strong><strong><strong>project</strong></strong>\BBWT.Server</strong> - The back-end code. Handles clients requests via API controllers.</li><li><strong><strong><strong>project</strong></strong>\BBWT.Services</strong> -  the services layer; describes business logic; works with models/DTOs and data context.</li></ul><h3 id="BBWT3-InformationforBeginners-TechnicalArchitecture">Technical Architecture</h3><div class="table-wrap"><table class="confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd"><p style="text-align: center;"><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="60" width="60" src="https://lh4.googleusercontent.com/z3si5FoSDWNINBKwh0rEmTo1McnBPK9M2UkPjYD1TiFSTcjSTDx66Be3gxP5d25hCDdK8I9a8HcGufaH4dtzUKDMdbcbQRk9sfWHYfngljsklKB6SVjYnxRKbpAtJDzlKQA0tYo" data-image-src="https://lh4.googleusercontent.com/z3si5FoSDWNINBKwh0rEmTo1McnBPK9M2UkPjYD1TiFSTcjSTDx66Be3gxP5d25hCDdK8I9a8HcGufaH4dtzUKDMdbcbQRk9sfWHYfngljsklKB6SVjYnxRKbpAtJDzlKQA0tYo"></span></span></span></p></td><td class="confluenceTd"><p style="text-align: center;"><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="60" width="39" src="https://lh4.googleusercontent.com/Q3G8f6NlhXaBAckoqog97zj5bLMO0oSR7A87WwDUMfDXFn26VrJCD02Vstp0iAnaMQ8uK2Tras4pZUBzALB92SY3SWYOqaFHWQKxgOdmSB2ro7Bw8v42FP_lzMir4qIseOli4a0" data-image-src="https://lh4.googleusercontent.com/Q3G8f6NlhXaBAckoqog97zj5bLMO0oSR7A87WwDUMfDXFn26VrJCD02Vstp0iAnaMQ8uK2Tras4pZUBzALB92SY3SWYOqaFHWQKxgOdmSB2ro7Bw8v42FP_lzMir4qIseOli4a0"></span></span></span></p></td><td class="confluenceTd"><p style="text-align: center;"><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="57" width="49" src="https://lh3.googleusercontent.com/qo41D-pTV3tjkzxxMEidc3AE1d6p4NZcwuwrJwrRVSweTqaAM2vHVjErzsAHL3y6CoLrunjJQvgBeXxsWn9CGkxvUtPnLFa3oJuqJQCrHieCaK-QyqYeHvVDj2SKwn0hymVDcAM" data-image-src="https://lh3.googleusercontent.com/qo41D-pTV3tjkzxxMEidc3AE1d6p4NZcwuwrJwrRVSweTqaAM2vHVjErzsAHL3y6CoLrunjJQvgBeXxsWn9CGkxvUtPnLFa3oJuqJQCrHieCaK-QyqYeHvVDj2SKwn0hymVDcAM"></span></span></span></p></td></tr><tr><td rowspan="2" class="confluenceTd"><ul><li style="list-style-type: disc;"><p>Angular</p></li><li style="list-style-type: disc;"><p>PrimeNG</p></li><li style="list-style-type: disc;"><p>TypeScript</p></li></ul></td><td class="confluenceTd"><ul><li style="list-style-type: disc;"><p>C#</p></li><li style="list-style-type: disc;"><p>ASP.NET Core </p><p><span style="color: rgb(0,0,0);">(on Windows or Linux)</span></p></li></ul></td><td class="confluenceTd"><ul><li style="list-style-type: disc;"><p>MySQL</p></li><li style="list-style-type: disc;"><p>Or MSSQL Server</p></li><li style="list-style-type: disc;"><p>Or Postgress</p></li><li style="list-style-type: disc;"><p>Or Amazon Aurora</p></li></ul></td></tr><tr><td class="confluenceTd"><p style="text-align: center;"><span style="color: rgb(51,51,153);">Middleware</span></p></td><td class="confluenceTd"><p style="text-align: center;"><span style="color: rgb(51,51,153);">Database</span></p></td></tr><tr><td class="confluenceTd"><p style="text-align: center;"><span style="color: rgb(255,102,0);"><strong>Client-side</strong></span></p></td><td colspan="2" class="confluenceTd"><p style="text-align: center;"><span style="color: rgb(51,51,153);"><strong>Server-side</strong></span></p></td></tr></tbody></table></div><h3 id="BBWT3-InformationforBeginners-CallSequenceofaClientRequest">Call Sequence of a Client Request</h3><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/85493017/85493018.png" data-image-src="attachments/85493017/85493018.png" data-unresolved-comment-count="0" data-linked-resource-id="85493018" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-8-30_9-6-13.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493017" data-linked-resource-container-version="1"></span></span><br/></span></p><p>In this figure, we can see how the different layers of the solution communicate with each other and with the exterior. The call sequence is the following:</p><ol><li>The client downloads all the static assets, including Angular, given by BBWT3.Client with the help of Webpack (this is done only once);</li><li>When the Angular app is started on the client, it starts to make REST HTTP calls to BBWT3.Server controllers;</li><li>The controller calls the service it needs to perform the demanded request;</li><li>The service asks EF to perform a database request (if needed);</li><li>EF performs the SQL requests (this is automatic);</li><li>The resulting data is retrieved (also automatic);</li><li>BBWT.Data gives back the resulting data as models to the service;</li><li>The service converts the model into a DTO and performs operations on it if needed;</li><li>The controller responds to the HTTP request with a JSON object containing the DTO.</li></ol><h1 id="BBWT3-InformationforBeginners-Addinganewfeature">Adding a new feature</h1><p>In this chapter we will create a new feature for a BBWT3 based project. We will cover all the steps starting from back-end to front-end required to create a basic structure of the feature.</p><p>Let's name the feature as <strong>&quot;My Feature&quot;</strong>. This name will be associated with corresponding feature classes in code. The feature's UI will follow these requirements:</p><ul><li>A single page, accessible by URL <strong>&quot;/app/my-feature&quot;</strong> for any logged user </li><li>The purpose of the page is to display a grid of records. </li><li>The grid records should be stored in the main database.</li><li>The page contains a grid component implementing basic CRUD operations: adding, editing, removing records.</li><li>The page contains a filter component to filter the grid records.</li><li>Additionally the page implements a single custom operation by clicking &quot;Do Something&quot; button.</li></ul><p>Let's introduce a name describing a type of the grid's record: <strong>&quot;My Entity&quot;</strong>. This name will be associated with corresponding entity classes in code.<br/>The feature then can be extended with any number of pages, modules and components you need, depending on requirements, but we implement a single page here.</p><p>When we complete all the steps below we should end up with this page view:</p><p><br/></p><p><span class="confluence-embedded-file-wrapper"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/85493017/85493019.png" data-image-src="attachments/85493017/85493019.png" data-unresolved-comment-count="0" data-linked-resource-id="85493019" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-4-5_9-30-0.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493017" data-linked-resource-container-version="1"></span></span></p><h2 id="BBWT3-InformationforBeginners-Back-end&#39;schanges">Back-end's changes</h2><p><br/></p><h3 id="BBWT3-InformationforBeginners-1.Addamodelclasstoproject/BBWT.Data/Model">1. Add a model class to project/BBWT.Data/Model</h3><p>As by our feature requirements we need records to be stored in the database, we need to create a database model.<br/>If in <strong>your</strong> requirements you don't use the database for records storing then jump directly to <a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step4" rel="nofollow">step 4</a>.</p><p>Create a new class in <strong>project/BBWT.Data/Model</strong>:<br/><strong>project/BBWT.Data/Model/MyEntity.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>AutoMapper;</code><br/><code>using</code> <code>BBWM.Core.Data;</code><br/><code>using</code> <code>BBWT.Data.DTO;</code><br/><code>using</code> <code>System.ComponentModel.DataAnnotations;</code><br/><code>using</code> <code>System.ComponentModel.DataAnnotations.Schema;</code><br/> <br/><code>namespace</code> <code>BBWT.Data.Model</code><br/><code>{</code><br/><code>    </code><code>[Table(</code><code>&quot;MyEntities&quot;</code><code>)]</code><br/><code>    </code><code>public</code> <code>class</code> <code>MyEntity : IEntity</code><br/><code>    </code><code>{</code><br/><code>        </code><code>public</code> <code>int</code> <code>Id { </code><code>get</code><code>; </code><code>set</code><code>; }</code><br/> <br/><code>        </code><code>[Required]</code><br/><code>        </code><code>public</code> <code>int</code> <code>Field1 { </code><code>get</code><code>; </code><code>set</code><code>; }</code><br/> <br/><code>        </code><code>[StringLength(255)]</code><br/><code>        </code><code>public</code> <code>string</code> <code>Field2 { </code><code>get</code><code>; </code><code>set</code><code>; }</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>For more information on how to write this class, see <a class="external-link" href="https://docs.microsoft.com/en-us/aspnet/core/data/ef-mvc/complex-data-model" rel="nofollow">Entity Framework Core documentation</a></p><p>We use the plural form for table names and the singular form for a model class . So here we create &quot;MyEntities&quot; table and &quot;MyEntity&quot; model class.</p><p><br/></p><h3 id="BBWT3-InformationforBeginners-2.AddaDbSetforyourmodeltoproject/BBWT.Data">2. Add a DbSet for your model to project/BBWT.Data</h3><p>In order to add our new model to the database context, add properties into these classes:<br/><strong>project/BBWT.Data/DataContextBase.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>public</code> <code>DbSet&lt;MyEntity&gt; MyEntities { </code><code>get</code><code>; </code><code>set</code><code>; }</code></p></td></tr></tbody></table></div><p><br/><br/><strong>project/BBWT.Data/IDataContext.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>DbSet&lt;MyEntity&gt; MyEntities { </code><code>get</code><code>; </code><code>set</code><code>; }</code></p></td></tr></tbody></table></div><h3 id="BBWT3-InformationforBeginners-3.Addadatabasemigrationformodelschanges">3. Add a database migration for models changes</h3><p>If you modify the models schema by adding, editing or deleting models (in our example we do it on <a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step1" rel="nofollow">step 1</a>, <a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step2" rel="nofollow">step 2</a>)  then these changes should be applied to the database using migrations.</p><p>Depending on your project requirements you support either SQL Server or MySQL provider.</p><p><br/></p><p>Using CLI set <strong>BBWT.Server </strong>as an active folder and run a corresponding command, depending on your data provider. <br/><strong>Adding migration for SQL Server</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>dotnet ef migrations add &lt;MigrationName&gt; -p ../bbwt.data.sqlserver -s ./</code></p></td></tr></tbody></table></div><p class="auto-cursor-target">This command creates a migration file in <strong>project/BBWT.Data.SqlServer/Migrations</strong> folder and also updates the database snapshot (DataContextModelSnapshot class) in the same folder.</p><p><br/><br/><strong>Adding migration for MySQL</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>dotnet ef migrations add &lt;MigrationName&gt; -p ../bbwt.data.mysql -s ./</code></p></td></tr></tbody></table></div><p>This command creates a migration file in <strong>project/BBWT.Data.MySQL/Migrations</strong> folder and also updates the database snapshot (DataContextModelSnapshot class) in the same folder.</p><p><br/></p><p>In both examples &lt;MigrationName&gt; is  a descriptive name of the migration, without white spaces . For our case it can be named AddMyEntity, for example.</p><p>A good practice is to review a newly created migration file and check that all the migration commands it includes correspond your model schema changes.</p><p>After we've created and reviewed the migration file, let's apply the changes to the database. There are two ways to do it.</p><ol><li>Simply run your local application.<br/>As we suppose in this document that you run your application locally and apply changes for your local database, then for this case the application automatically applies migrations on starting up. It means you don't need any additional actions. <br/>This is a recommended choice.</li><li>In case if you need to apply the changes forcibly before the application starts, run one or both of these commands, depending on database providers you support:</li></ol><p><br/><strong>Applying migration for SQL Server</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>dotnet ef database update -p ../bbwt.data.sqlserver -s ./</code></p></td></tr></tbody></table></div><p><br/><br/><strong>Applying migration for MySQL</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>dotnet ef database update -p ../bbwt.data.mysql -s ./</code></p></td></tr></tbody></table></div><p><br/></p><h3 id="BBWT3-InformationforBeginners-4.AddaDTOtoproject/BBWT.Data/DTO">4. Add a DTO to project/BBWT.Data/DTO</h3><p>Now that we have a model which is applicable to the database context, we need a DTO class to represent data for the client-side.</p><p><span style="color: rgb(0,0,0);">A DTO class is a representation of a database entity, formatted for the client-side. Its properties can match the model completely or differ, depending on data required on the client-side.</span></p><p><br/><br/><strong>project/BBWT.Data/DTO/MyEntityDTO.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>BBWM.Core.DTO;</code><br/> <br/><code>namespace</code> <code>BBWT.Data.DTO</code><br/><code>{</code><br/><code>    </code><code>public</code> <code>class</code> <code>MyEntityDTO: IDTO</code><br/><code>    </code><code>{</code><br/><code>        </code><code>public</code> <code>int</code> <code>Id { </code><code>get</code><code>; </code><code>set</code><code>; }</code><br/><code>        </code><code>public</code> <code>int</code> <code>Field1 { </code><code>get</code><code>; </code><code>set</code><code>; }</code><br/><code>        </code><code>public</code> <code>string</code> <code>Field2 { </code><code>get</code><code>; </code><code>set</code><code>; }</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p><br/></p><p><span style="color: rgb(0,0,0);">Your DTO class should be named with “DTO” postfix in order to be recognizable.</span></p><h3 id="BBWT3-InformationforBeginners-5.AddamappingbetweenyourmodelandDTO">5. Add a mapping between your model and DTO</h3><p>Here we will define how the model's properties are mapped into the DTO and back.</p><p>It's recommended that you do it with one of these approaches described below.</p><h4 id="BBWT3-InformationforBeginners-Approach1.Addaspecialmappingmethodintothemodel&#39;sclass">Approach 1. Add a special mapping method into the model's class</h4><p>Add <strong>RegisterMap()</strong> method like in a code below into you model's class (described on <a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step1" rel="nofollow">step 1</a>)<br/><strong>project/BBWT.Data/Model/MyEntity.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>//...</code><br/><code>public</code> <code>class</code> <code>MyEntity : IEntity</code><br/><code>{</code><br/><code>    </code><code>//...</code><br/><code>    </code><code>public</code> <code>static</code> <code>void</code> <code>RegisterMap(IMapperConfigurationExpression c)</code><br/><code>    </code><code>{</code><br/><code>        </code><code>c.CreateMap&lt;MyEntity, MyEntityDTO&gt;().ReverseMap();</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>This is a <em>recommended</em> approach. It was developed in BBWT for ease of use. Doing so you keep a model along with its mapping and avoid creating an extra file with a mapping class, at least you avoid adding of extra code lines with mapping into a <em>separate </em>file.<br/>Bear this in mind in order to auto-register a mapping properly: on the application start the BBWT searches for <strong>static</strong> &amp; <strong>public</strong> implementations of the <strong>RegisterMap(IMapperConfigurationExpression)</strong> method through all the project's models inherited from <strong>IEntity. </strong></p><h4 id="BBWT3-InformationforBeginners-Approach2.Createanewmappingprofileclass">Approach 2. Create a new mapping profile class</h4><p>Otherwise, if you need mappings to be added separately due code flexibility/complexity etc., create a mapping profile's class named “ &lt;your_entity_name&gt;MappingProfile ” in <strong>BBWT.Data/Mapping </strong>.<br/><strong>project/BBWT.Data/Mapping/MyEntityMappingProfile.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>AutoMapper;</code><br/><code>using</code> <code>BBWT.Data.DTO;</code><br/><code>using</code> <code>BBWT.Data.Model;</code><br/> <br/><code>namespace</code> <code>BBWT.Data.Mapping</code><br/><code>{</code><br/><code>    </code><code>public</code> <code>class</code> <code>MyEntityMappingProfile : Profile</code><br/><code>    </code><code>{</code><br/><code>        </code><code>public</code> <code>MyEntityMappingProfile()</code><br/><code>        </code><code>{</code><br/><code>            </code><code>CreateMap&lt;MyEntity, MyEntityDTO&gt;().ReverseMap();            </code><br/><code>        </code><code>}</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p><span style="color: rgb(0,0,0);"><br/></span></p><hr/><p><span style="color: rgb(0,0,0);">If the DTO properties names do not exactly match the model properties (for example, you need to map MyEntity.<strong>CreatedOn</strong> to MyEntityDTO.<strong>CreationDate</strong>) then here you explicitly specify the properties mapping using the properties projection (<strong>ForMember()</strong> method). </span></p><p><span style="color: rgb(0,0,0);">Another example of the projection is when you need to make property values conversion (for example, a coefficient should be presented in percentage: </span> <span style="color: rgb(0,0,0);">MyEntity.</span> <strong>CompressionKoef</strong> <span style="color: rgb(0,0,0);"> to MyEntityDTO.<strong>CompressionPercent</strong>).</span></p><p><span style="color: rgb(0,0,0);">Both examples are shown in this code:</span></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>CreateMap&lt;MyEntity, MyEntityDTO&gt;().</code><br/><code>    </code><code>.ForMember(dto =&gt; dto.CreationDate, o =&gt; o.MapFrom(m =&gt; m.CreatedOn))</code><br/><code>    </code><code>.ForMember(dto =&gt; dto.CompressionPercent, o =&gt; o.MapFrom(m =&gt; m.CompressionKoef * 100))</code></p></td></tr></tbody></table></div><p>See more details about projection <a class="external-link" href="https://docs.automapper.org/en/stable/Projection.html#projection" rel="nofollow">here</a>.</p><hr/><p><br/></p><h3 id="BBWT3-InformationforBeginners-6.Addaserviceinterfacetoproject/BBWT.Services">6. Add a service interface to project/BBWT.Services</h3><p>Let's create our service now. Firstly, we need to create an interface that defines the functionality.</p><p>To do that add a class named “ I&lt;your_entity_name&gt;Service ” in  <strong>BBWT.Service </strong>folder.<br/><strong>project/BBWT.Services/IMyEntityService.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>BBWM.Core.Crud.Interfaces;</code><br/><code>using</code> <code>BBWT.Data.DTO;</code><br/><code>using</code> <code>System.Threading;</code><br/><code>using</code> <code>System.Threading.Tasks;</code><br/> <br/><code>namespace</code> <code>BBWT.Services</code><br/><code>{</code><br/><code>    </code><code>public</code> <code>interface</code> <code>IMyEntityService : IPagedCrudService&lt;MyEntityDTO&gt;</code><br/><code>    </code><code>{</code><br/><code>        </code><code>Task DoSomething(</code><code>int</code> <code>someValue, CancellationToken cancellationToken = </code><code>default</code><code>);</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>Here we define an interface inherited from IPagedCrudService.</p><p>We have a helper classes and interfaces which implement grids and <a class="external-link" href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" rel="nofollow">CRUD</a> capabilities. You can define an interface either as:</p><ul><li><strong><span style="color: rgb(0,0,255);">public interface</span> IMyEntityService</strong><br/>if you need a custom interface without paging / CRUD capabilities</li></ul><ul><li><strong><span style="color: rgb(0,0,255);">public interface</span> IMyEntityService: IPagedCrudService&lt;MyEntityDTO&gt;</strong><br/>if you need an interface with paging &amp; CRUD capabilities</li></ul><ul><li><strong><span style="color: rgb(0,0,255);">public interface</span> IMyEntityService: ICrudService&lt;MyEntityDTO&gt;</strong><br/>if you need an interface with CRUD capabilities</li></ul><p>To give our new service some new functionality we define a single new method DoSomething().</p><h3 id="BBWT3-InformationforBeginners-7.AddaserviceclasstoBBWT.Services">7. Add a service class to BBWT.Services</h3><p>After we've declared the interface we will add a corresponding class to implement the service's methods. Create a new class “ &lt;your_entity_name&gt;Service ” in <strong>BBWT.Services </strong>folder.<br/><strong>project/BBWT.Services/MyEntityService.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>AutoMapper;</code><br/><code>using</code> <code>BBWM.Core.Crud;</code><br/><code>using</code> <code>BBWM.Core.Data;</code><br/><code>using</code> <code>BBWM.Core.Exceptions;</code><br/><code>using</code> <code>BBWT.Data.DTO;</code><br/><code>using</code> <code>BBWT.Data.Model;</code><br/><code>using</code> <code>Microsoft.EntityFrameworkCore;</code><br/><code>using</code> <code>System.Threading;</code><br/><code>using</code> <code>System.Threading.Tasks;</code><br/> <br/><code>namespace</code> <code>BBWT.Services</code><br/><code>{</code><br/><code>    </code><code>public</code> <code>class</code> <code>MyEntityService : PagedCrudService&lt;MyEntity, MyEntityDTO&gt;, IMyEntityService</code><br/><code>    </code><code>{</code><br/><code>        </code><code>public</code> <code>MyEntityService(IDbContext context, IMapper mapper) : </code><code>base</code><code>(context, mapper) { }</code><br/> <br/><code>        </code><code>//Implementation of our DoSomething method, declare in IMyEntityService interface</code><br/><code>        </code><code>public</code> <code>async Task DoSomething(</code><code>int</code> <code>someValue, CancellationToken cancellationToken = </code><code>default</code><code>)</code><br/><code>        </code><code>{</code><br/><code>            </code><code>//an example of business error handling</code><br/><code>            </code><code>if</code> <code>(someValue &lt;= 0)</code><br/><code>                </code><code>throw</code> <code>new</code> <code>BusinessException(</code><code>&quot;The value must be greater than zero&quot;</code><code>);</code><br/> <br/><code>            </code><code>//...the method's implementation</code><br/><code>        </code><code>}</code><br/> <br/><code>        </code><code>//An example how to override a base CRUD method</code><br/><code>        </code><code>public</code> <code>override</code> <code>async Task Delete(</code><code>int</code> <code>id, CancellationToken cancellationToken = </code><code>default</code><code>)</code><br/><code>        </code><code>{</code><br/><code>            </code><code>var entity = await GetQueryable&lt;MyEntity&gt;().FirstOrDefaultAsync(x =&gt; x.Id == id);</code><br/> <br/><code>            </code><code>if</code> <code>(entity != </code><code>null</code><code>)</code><br/><code>            </code><code>{</code><br/><code>                </code><code>//...</code><br/><code>                </code><code>//doing some custom logic, e.g. check if it's possible to delete the entity</code><br/><code>                </code><code>//...</code><br/> <br/><code>                </code><code>Remove(entity);</code><br/><code>                </code><code>await SaveChangesAsync(cancellationToken);</code><br/><code>            </code><code>}</code><br/><code>        </code><code>}</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>As we declared the interface as supposed to implement paging &amp; CRUD functionality, then the MyEntityService class is inherited from the PagedCrudServiceBase, which implements the basic methods.</p><p>In particular, here we demonstrate how to override a base CRUD method Delete(), thereby claiming that the method should implement some custom logic, different from the base one. More examples of methods overrides you can find in one of the core services. For example, in <strong>modules/BBWM.Core.Membership/Services/UserService.cs</strong>.</p><p>The DoSomething() method includes a code part demonstrating an errors handling: </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>if</code> <code>(someValue &lt;= 0)</code><br/><code>    </code><code>throw</code> <code>new</code> <code>BusinessException(</code><code>&quot;The value must be greater than zero&quot;</code><code>);</code></p></td></tr></tbody></table></div><p>We use errors handling through all the layers of the server-side. It's based on exceptions throwing and then handling them according to an exception type. See the core exception types here: <strong>modules/BBWM.Core/Exceptions</strong>.</p><h3 id="BBWT3-InformationforBeginners-8.Registeryourserviceinproject/BBWT.Services/ServiceCollectionExtension.cs">8. Register your service in project/BBWT.Services/ServiceCollectionExtension.cs</h3><p>In order to make your service instances be automatically created by the dependency injection (DI), link the service interface to the service class in a special method:<br/><strong>project/BBWT.Services/ServiceCollectionExtensions.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>Autofac;</code><br/><code>using</code> <code>BBWM.AutofacExtensions;</code><br/><code>using</code> <code>BBWM.Core.Membership;</code><br/> <br/><code>namespace</code> <code>BBWT.Services</code><br/><code>{</code><br/><code>    </code><code>public</code> <code>static</code> <code>class</code> <code>ServiceCollectionExtensions</code><br/><code>    </code><code>{</code><br/><code>        </code><code>public</code> <code>static</code> <code>void</code> <code>RegisterBBWTServices(</code><code>this</code> <code>ContainerBuilder builder)</code><br/><code>        </code><code>{</code><br/><code>            </code><code>builder.RegisterService&lt;IMyEntityService, MyEntityService&gt;();</code><br/><code>        </code><code>}</code><br/> <br/> <br/><code>        </code><code>//...</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><h3 id="BBWT3-InformationforBeginners-9.Addacontrollertoproject/BBWT.Server/Api">9. Add a controller to project/BBWT.Server/Api</h3><p>Here we will create an API endpoint the front-end will communicate with in order to access the services.</p><p>Create a class named “ &lt;your_controller_name&gt;Controller ” in <strong>project/BBWT.Server/Api</strong>.<br/><strong>project/BBWT.Server/Api/MyEntityController.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>BBWM.Core.Crud;</code><br/><code>using</code> <code>BBWM.Core.Web;</code><br/><code>using</code> <code>BBWT.Data.DTO;</code><br/><code>using</code> <code>BBWT.Services;</code><br/><code>using</code> <code>Microsoft.AspNetCore.Authorization;</code><br/><code>using</code> <code>Microsoft.AspNetCore.Mvc;</code><br/><code>using</code> <code>Microsoft.Extensions.Logging;</code><br/><code>using</code> <code>System.Threading;</code><br/><code>using</code> <code>System.Threading.Tasks;</code><br/> <br/><code>namespace</code> <code>BBWT.Server.Api</code><br/><code>{</code><br/><code>    </code><code>[Produces(</code><code>&quot;application/json&quot;</code><code>)]</code><br/><code>    </code><code>[Route(</code><code>&quot;api/my-entity&quot;</code><code>)]</code><br/><code>    </code><code>[Authorize]</code><br/><code>    </code><code>public</code> <code>class</code> <code>MyEntityController : PagedCrudControllerBase&lt;MyEntityDTO&gt;</code><br/><code>    </code><code>{</code><br/><code>        </code><code>private</code> <code>IMyEntityService MyEntityService =&gt; CrudService </code><code>as</code> <code>IMyEntityService;</code><br/> <br/><code>        </code><code>public</code> <code>MyEntityController(IMyEntityService service, ILogger&lt;MyEntityController&gt; logger) : </code><code>base</code><code>(service, logger)</code><br/><code>        </code><code>{</code><br/><code>        </code><code>}</code><br/> <br/><code>        </code><code>[HttpPost]</code><br/><code>        </code><code>[Route(</code><code>&quot;do-something/{someValue}&quot;</code><code>)]</code><br/><code>        </code><code>public</code> <code>async Task&lt;IActionResult&gt; DoSomething(</code><code>int</code> <code>someValue, CancellationToken cancellationToken = </code><code>default</code><code>) =&gt;</code><br/><code>            </code><code>await NoContent(() =&gt; MyEntityService.DoSomething(someValue, cancellationToken));</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>As our service is declared to implement paging &amp; CRUD functionality, the controller is inherited correspondingly from PagedCrudControllerBase.</p><p>The example code has one API method DoSomething() that calls a corresponding service's method and outputs with some HTTP response code and data.</p><h3 id="BBWT3-InformationforBeginners-10.Addinitialdatatodatabaseinproject/BBWT.InitialData/ProjectInitialData.cs">10. Add initial data to database in project/BBWT.InitialData/ProjectInitialData.cs</h3><p>Sometimes a project's logic requires database records to be initially created before the application starts. These records remain as read-only in the tables or editable later on, depending on the table's purpose. It can be records for tables with item statuses (like invoice or order status), item types (like organization type) etc. For instance, the BBWT3 application adds records of initial versions of email templates which can be edited later on the website's page.</p><p>If your feature requires initial data to be added then stay on this step.</p><p>Suppose our feature requires 3 records to be initially added into the <strong>MyEntities</strong> table and then remain unchanged. Suppose we will identify our records by &quot;Field2&quot; field. Let's use these values: &quot;FIXED-ITEM-A&quot;, &quot;FIXED-ITEM-B&quot;, &quot;FIXED-ITEM-C&quot;. </p><p>Note, for simplicity of the feature's sample, we will not consider fixing these records as read-only in the grid's UI!<br/><strong>project/BBWT.InitialData/ProjectInitialData.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>BBWM.Core.Data;</code><br/><code>using</code> <code>BBWT.Data.Model;</code><br/><code>using</code> <code>System.Linq;</code><br/> <br/><code>namespace</code> <code>BBWT.InitialData</code><br/><code>{</code><br/><code>    </code><code>internal</code> <code>static</code> <code>class</code> <code>ProjectInitialData</code><br/><code>    </code><code>{</code><br/><code>        </code><code>public</code> <code>static</code> <code>void</code> <code>EnsureInitialData(IDbContext context)</code><br/><code>        </code><code>{</code><br/><code>            </code><code>// Add project's data initialization here.</code><br/><code>            </code><code>// Initialization is completed with: context.SaveChanges();</code><br/> <br/><code>            </code><code>// The list of fixed items which should exist in initial database by a project requirement</code><br/><code>            </code><code>var items = </code><code>new</code> <code>MyEntity[] {</code><br/><code>                </code><code>new</code> <code>MyEntity { Field1 = 10, Field2 = </code><code>&quot;FIXED-ITEM-A&quot;</code> <code>},</code><br/><code>                </code><code>new</code> <code>MyEntity { Field1 = 20, Field2 = </code><code>&quot;FIXED-ITEM-B&quot;</code> <code>},</code><br/><code>                </code><code>new</code> <code>MyEntity { Field1 = 30, Field2 = </code><code>&quot;FIXED-ITEM-C&quot;</code> <code>}</code><br/><code>            </code><code>};</code><br/> <br/><code>            </code><code>// Searching in existent records by the identifying field's value (Field2) of the first fixed item</code><br/><code>            </code><code>if</code> <code>(!context.Set&lt;MyEntity&gt;().Any(x =&gt; x.Field2 == items[0].Field2))</code><br/><code>            </code><code>{</code><br/><code>                </code><code>context.Set&lt;MyEntity&gt;().AddRange(items);</code><br/><code>                </code><code>context.SaveChanges();</code><br/><code>            </code><code>}</code><br/><code>        </code><code>}</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><h3 id="BBWT3-InformationforBeginners-11.Addrouterolesinproject/BBWT.InitialData/RouteRolesDataService.cs">11. Add route roles in <strong>project/BBWT.InitialData/RouteRolesDataService.cs</strong></h3><p>In BBWT3 we link each page's route to a list of roles the page is allowed for. <br/><strong>project/BBWT.InitialData/RouteRolesDataService.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>namespace</code> <code>BBWT.InitialData</code><br/><code>{</code><br/><code>    </code><code>public</code> <code>partial</code> <code>class</code> <code>RouteRolesDataService : IRouteRolesDataService</code><br/><code>    </code><code>{</code><br/><code>        </code><code>//...</code><br/><code>        </code><code>public</code> <code>void</code> <code>InitRouteRoles()</code><br/><code>        </code><code>{</code><br/><code>            </code><code>var result = </code><code>new</code> <code>List&lt;PageInfoDTO&gt;</code><br/><code>            </code><code>{              </code><br/><code>                </code><code>new</code> <code>PageInfoDTO(</code><code>&quot;/app/my-feature&quot;</code><code>, </code><code>&quot;My Entities&quot;</code><code>, AggregatedRole.Authenticated),               </code><br/><code>                </code><code>//...</code><br/><code>            </code><code>};</code><br/><code>            </code><code>//...</code><br/><code>        </code><code>}</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>In our case the route is <strong>&quot;/app/my-feature&quot;</strong> and the roles list is presented by a single role <strong>AggregatedRole.Authenticated</strong>, stored as a constant. <br/><strong>AggregatedRole.Authenticated</strong> is not a role in terms of roles &amp; permissions of the .Net Core Identity, but is our custom implementation to indicate if user is authenticated or not. See <strong>modules/BBWM.Core.Membership/Enums/AggregatedRole.cs</strong></p><h3 id="BBWT3-InformationforBeginners-12.Addaunittesttotest/BBWT.Services.Test">12. Add a unit test to test/BBWT.Services.Test</h3><p>Automatic units testing is an efficient way to avoid/reveal code bugs and issues on a pre-deployment stage of continuous integration (CI). If you decide to use it then stay on this step.</p><p>Create a separate folder <strong>MyFeature </strong>in <strong>test/BBWT.Services.Test</strong> project. There we will place all tests for the <span>feature services.</span></p><p><span>We have the only <strong>MyEntityService</strong> </span> <span>service</span> <span>in our sample. Create a class <strong>MyEntityServiceTest</strong> the service's tests will be added to, as shown in example:</span><br/><strong>test/BBWT.Services.Test/MyFeature/MyEntityServiceTest.cs</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>using</code> <code>System;</code><br/><code>using</code> <code>System.Collections.Generic;</code><br/><code>using</code> <code>System.Threading.Tasks;</code><br/><code>using</code> <code>AutoMapper;</code><br/><code>using</code> <code>BBWM.Core.Filters;</code><br/><code>using</code> <code>BBWM.Core.Test;</code><br/><code>using</code> <code>BBWM.Core.Test.Crud;</code><br/><code>using</code> <code>BBWT.Data.DTO;</code><br/><code>using</code> <code>Bogus;</code><br/><code>using</code> <code>Xunit;</code><br/> <br/><code>namespace</code> <code>BBWT.Services.Test.MyFeature</code><br/><code>{</code><br/><code>    </code><code>// The class inherits PagedCrudServiceTestBase to implement built-in paging/CRUD tests</code><br/><code>    </code><code>public</code> <code>class</code> <code>MyEntityServiceTest : PagedCrudServiceTestBase&lt;IMyEntityService, MyEntityDTO, </code><code>int</code><code>&gt;</code><br/><code>    </code><code>{</code><br/><code>        </code><code>// Generates a fake MyEntityService</code><br/><code>        </code><code>protected</code> <code>override</code> <code>IMyEntityService GetService&lt;TContext&gt;(TContext context)</code><br/><code>        </code><code>{</code><br/><code>            </code><code>if</code> <code>(!(context </code><code>is</code> <code>DataContext ctx))</code><br/><code>            </code><code>{</code><br/><code>                </code><code>throw</code> <code>new</code> <code>InvalidCastException();</code><br/><code>            </code><code>}</code><br/> <br/><code>            </code><code>return</code> <code>new</code> <code>MyEntityService(ctx, </code><code>this</code><code>.Mapper);</code><br/><code>        </code><code>}</code><br/> <br/><code>        </code><code>// Generates a fake MyEntityDTO object with random values</code><br/><code>        </code><code>protected</code> <code>override</code> <code>MyEntityDTO GetEntity()</code><br/><code>        </code><code>{</code><br/><code>            </code><code>var faker = </code><code>new</code> <code>Faker&lt;MyEntityDTO&gt;()</code><br/><code>                </code><code>.RuleFor(p =&gt; p.Id, s =&gt; 0)</code><br/><code>                </code><code>.RuleFor(p =&gt; p.Field1, s =&gt; s.Random.Int(0, 1000))</code><br/><code>                </code><code>.RuleFor(p =&gt; p.Field2, s =&gt; s.Random.String2(10));</code><br/><code>            </code><code>return</code> <code>faker.Generate();</code><br/><code>        </code><code>}</code><br/> <br/><code>        </code><code>// The base class' method, required to be overriden</code><br/><code>        </code><code>protected</code> <code>override</code> <code>IEnumerable&lt;FilterInfoBase&gt; GetFilters()</code><br/><code>        </code><code>{</code><br/><code>            </code><code>throw</code> <code>new</code> <code>NotImplementedException();</code><br/><code>        </code><code>}</code><br/> <br/><code>        </code><code>// The base class' method, required to be overriden</code><br/><code>        </code><code>protected</code> <code>override</code> <code>void</code> <code>ChangeAttribute(MyEntityDTO entity)</code><br/><code>        </code><code>{</code><br/><code>            </code><code>entity.Field2 = entity.Field2 + </code><code>&quot; New&quot;</code><code>;</code><br/><code>        </code><code>}</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>As our <strong>MyEntityService</strong> implements paging/CRUD logic then we inherit <strong>MyEntityServiceTest</strong> from corresponding base class to implement basic testing functionality. In the example above we create a single test of an entity adding , its method simply calls the method of the base class.</p><p>Now we are ready to run tests for the feature.</p><h2 id="BBWT3-InformationforBeginners-Front-end&#39;schanges">Front-end's changes</h2><p>In the front-end code a feature is presented by an Angular module which contains all its components, services and interfaces.</p><h3 id="BBWT3-InformationforBeginners-Featureorientedstructure">Feature oriented structure </h3><p>In BBWT3 we use a <strong>feature oriented structure</strong> approach to keep files organized. It means all the feature's files are placed into a single folder. For our feature we will create <strong>my-feature</strong> folder.</p><p>All Angular modules that represent project-specific UI features are placed into <strong>project/BBWT.Client/src/app/project.</strong> Then the full path for the feature's files will be <strong>project/BBWT.Client/src/app/project/my-feature.</strong></p><p>To make files navigation simple we keep a plain files structure inside a feature's folder by default. Particularly, the plain files structure simplifies references declarations in files. For our feature it looks so:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="138" src="attachments/85493017/85493020.png" data-image-src="attachments/85493017/85493020.png" data-unresolved-comment-count="0" data-linked-resource-id="85493020" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-12-17_14-59-20.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493017" data-linked-resource-container-version="1"></span></span></p><p>So you can easily observe all your files.</p><p>When the files structure gets bigger then you can put files into sub-folders, grouping them by categories. We use this file sub-folders template:</p><ul><li><strong>&lt;feature folder&gt;/components</strong> - HTML &amp; TS &amp; CSS files of Angular components</li><li><strong>&lt;feature folder&gt;/services</strong> - services classes</li><li><strong>&lt;feature folder&gt;/classes</strong> - models classes</li><li><strong>&lt;feature folder&gt;/directives</strong> - Angular directives classes</li><li><strong>&lt;feature folder&gt;/...</strong> - you can extend the template depending on your structure complexity.</li></ul><p>So, for example, if you've got more than 6 files of components then you create <strong>&lt;feature folder&gt;/components </strong>folder for them. The minimum number of files required for a sub-folder is arguable. It's up to developer to decide, but the main purpose is to have a readable and easy to navigate files structure. </p><h3 id="BBWT3-InformationforBeginners-1.Addanentityinterface">1. Add an entity interface</h3><p>We need an entity interface at the front-end to represents a DTO class of the back-end (<a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step4" rel="nofollow">step 4</a>). Create an interface with name &quot;I&lt;your_entity_name&gt;&quot;.<br/><strong>project/BBWT.Client/src/app/project/my-feature/my-entity.d.ts</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>export </code><code>interface</code> <code>IMyEntity {</code><br/><code>    </code><code>id: number;</code><br/><code>    </code><code>field1: number;</code><br/><code>    </code><code>field2: </code><code>string</code><code>;</code><br/><code>}</code></p></td></tr></tbody></table></div><p>A DTO object, when it's sent to client, is automatically mapped to a front-end's entity object.</p><p>In debug mode you may notice that &quot;id_original&quot; field is added to the entity object. This is done for security. The &quot;id&quot; field is replaced by hashed value (e.g &quot;id&quot;=&quot;1-DA6DEA9A1EA22DA4&quot; where real ID=1) and &quot;id_original&quot; contains the original ID (e.g &quot;id_original&quot;=1). More details <a href="https://wiki.bbconsult.co.uk/display/BLUEB/Use+of+hash+of+Entity+ID" rel="nofollow">here</a>.</p><p>Use the &quot;id&quot; field as an entity identifier for the front-end coding.</p><h3 id="BBWT3-InformationforBeginners-2.Addaserviceclass">2. Add a service class</h3><p>A service class communicates with corresponding end-point at the server-side (<a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step9" rel="nofollow">controller</a>) and can implement methods required to work with paging, CRUD and other custom functionality. <br/><strong>project/BBWT.Client/src/app/project/my-feature/my-entity.service.ts</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>import { HttpClient } from </code><code>&quot;@angular/common/http&quot;</code><code>;</code><br/><code>import { Injectable } from </code><code>&quot;@angular/core&quot;</code><code>;</code><br/><code>import { HttpResponsesHandlersFactory } from </code><code>&quot;@bbwt/modules/data-service&quot;</code><code>;</code><br/><code>import { PagedCrudService } from </code><code>&quot;@features/grid&quot;</code><code>;</code><br/><code>import { IMyEntity } from </code><code>&quot;./my-entity&quot;</code><code>;</code><br/> <br/><code>@Injectable()</code><br/><code>export </code><code>class</code> <code>MyEntityService extends PagedCrudService&lt;IMyEntity&gt; {</code><br/><code>    </code><code>public</code> <code>readonly</code> <code>url = </code><code>&quot;api/my-entity&quot;</code><code>;</code><br/><code>    </code><code>public</code> <code>readonly</code> <code>entityTitle = </code><code>&quot;My Entity&quot;</code><code>;</code><br/> <br/><code>    </code><code>constructor(http: HttpClient, handlersFactory: HttpResponsesHandlersFactory) {</code><br/><code>        </code><code>super(http, handlersFactory);</code><br/><code>    </code><code>}</code><br/> <br/><code>    </code><code>public</code> <code>doSomething(someValue: number): Promise&lt;any&gt; {</code><br/><code>        </code><code>return</code> <code>this</code><code>.handleRequest&lt;any&gt;(</code><br/><code>            </code><code>this</code><code>.http.post&lt;any&gt;(`${</code><code>this</code><code>.url}/</code><code>do</code><code>-something/${someValue}`, </code><code>null</code><code>),</code><br/><code>            </code><code>this</code><code>.handlersFactory.getDefault());</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p><strong>MyEntityService</strong> extends <strong>PagedCrudService</strong> class to implement paging &amp; CRUD functionality required by the server-side. Also we added <strong>doSomething()</strong> method to call a corresponding controller's method.</p><p>Note, we declare:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>public</code> <code>readonly</code> <code>url = </code><code>&quot;api/my-entity&quot;</code><code>;</code></p></td></tr></tbody></table></div><p>which matches the end-point's route, declared in the controller class on <a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-step9" rel="nofollow">the previous step</a>:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>[Route(</code><code>&quot;api/my-entity&quot;</code><code>)]</code></p></td></tr></tbody></table></div><h3 id="BBWT3-InformationforBeginners-3.AddanAngularcomponent">3. Add an Angular component</h3><p>We will place all the UI into a single Angular component. It will include:</p><ul><li>a grid component to list entity records and implement CRUD operations</li><li>a filter component to filter out the grid's elements</li><li>a custom button to call DoSomething() method</li></ul><p>Create an HTML markup file for all the listed elements above:<br/><strong>project/BBWT.Client/src/app/project/my-feature/my-entities.component.html</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>&lt;bb-card header=</code><code>&quot;Manage My Entities&quot;</code><code>&gt;</code><br/><code>    </code><code>&lt;filter #filter [settings]=</code><code>&quot;filterSettings&quot;</code><code>&gt;&lt;/filter&gt;</code><br/><code>    </code><code>&lt;grid [columns]=</code><code>&quot;columns&quot;</code> <code>[dataService]=</code><code>&quot;myEntityService&quot;</code> <code>[filter]=</code><code>&quot;filter&quot;</code><code>&gt;&lt;/grid&gt;</code><br/><code>    </code><code>&lt;div </code><code>class</code><code>=</code><code>&quot;button-panel&quot;</code><code>&gt;</code><br/><code>        </code><code>&lt;div </code><code>class</code><code>=</code><code>&quot;left&quot;</code><code>&gt;</code><br/><code>            </code><code>&lt;button type=</code><code>&quot;button&quot;</code> <code>pButton (click)=</code><code>&quot;doSomething()&quot;</code> <code>label=</code><code>&quot;Do Something&quot;</code><code>&gt;&lt;/button&gt;</code><br/><code>        </code><code>&lt;/div&gt;</code><br/><code>    </code><code>&lt;/div&gt;</code><br/><code>&lt;/bb-card&gt;</code></p></td></tr></tbody></table></div><p>Then create a typescript file that will be linked to the markup and will contain the component's code and describe its behaviour:<br/><strong>project/BBWT.Client/src/app/project/my-feature/my-entities.component.ts</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>import { Component, ViewChild } from </code><code>&quot;@angular/core&quot;</code><code>;</code><br/><code>import { Validators } from </code><code>&quot;@angular/forms&quot;</code><code>;</code><br/><code>import { MyEntityService } from </code><code>&quot;./my-entity.service&quot;</code><code>;</code><br/><code>import { GridColumn, CellEditingInputType } from </code><code>&quot;@features/grid&quot;</code><code>;</code><br/><code>import { FilterSettings, InputType, FilterType } from </code><code>&quot;@features/filter&quot;</code><code>;</code><br/><code>import { GridValidator } from </code><code>&quot;@features/grid&quot;</code><code>;</code><br/><code>import { MessageService } from </code><code>&quot;primeng/api&quot;</code><code>;</code><br/><code>import { Message } from </code><code>&quot;@bbwt/classes&quot;</code><code>;</code><br/> <br/><code>@Component({</code><br/><code>    </code><code>selector: </code><code>&quot;my-entities&quot;</code><code>,</code><br/><code>    </code><code>templateUrl: </code><code>&quot;./my-entities.component.html&quot;</code><br/><code>})</code><br/><code>export </code><code>class</code> <code>MyEntitiesComponent {</code><br/><code>    </code><code>// Grid columns initialization</code><br/><code>    </code><code>columns = [</code><br/><code>        </code><code>&lt;GridColumn&gt;{</code><br/><code>            </code><code>field: </code><code>&quot;field1&quot;</code><code>,</code><br/><code>            </code><code>header: </code><code>&quot;Field 1&quot;</code><code>,</code><br/><code>            </code><code>validators: [</code><code>new</code> <code>GridValidator(Validators.required)],</code><br/><code>            </code><code>cellEditingInputType: CellEditingInputType.Number</code><br/><code>        </code><code>},</code><br/><code>        </code><code>&lt;GridColumn&gt;{</code><br/><code>            </code><code>field: </code><code>&quot;field2&quot;</code><code>,</code><br/><code>            </code><code>header: </code><code>&quot;Field 2&quot;</code><br/><code>        </code><code>}</code><br/><code>    </code><code>];</code><br/><code>    </code><code>// Filter settings initialization</code><br/><code>    </code><code>filterSettings = [</code><br/><code>        </code><code>&lt;FilterSettings&gt;{</code><br/><code>            </code><code>valueFieldName: </code><code>&quot;field1&quot;</code><code>,</code><br/><code>            </code><code>header: </code><code>&quot;Field 1&quot;</code><code>,</code><br/><code>            </code><code>filterType: FilterType.Number,</code><br/><code>            </code><code>inputType: InputType.Number</code><br/><code>        </code><code>},</code><br/><code>        </code><code>&lt;FilterSettings&gt;{</code><br/><code>            </code><code>valueFieldName: </code><code>&quot;field2&quot;</code><code>,</code><br/><code>            </code><code>header: </code><code>&quot;Field 2&quot;</code><br/><code>        </code><code>}</code><br/><code>    </code><code>];</code><br/> <br/><code>    </code><code>constructor(</code><code>public</code> <code>myEntityService: MyEntityService, </code><code>private</code> <code>messageService: MessageService, ) { }</code><br/> <br/><code>    </code><code>// &quot;Do Something&quot; button's handler</code><br/><code>    </code><code>doSomething() {</code><br/><code>        </code><code>this</code><code>.myEntityService.doSomething(100).then(() =&gt; {</code><br/><code>            </code><code>this</code><code>.messageService.add(Message.Success(</code><code>&quot;Something has been done!&quot;</code><code>, </code><code>&quot;Do Something&quot;</code><code>));</code><br/><code>        </code><code>});</code><br/><code>    </code><code>}</code><br/><code>}</code></p></td></tr></tbody></table></div><p>The body of the component's class contains initialization of the grid's column, the filter's settings and a method that handles the &quot;Do Something&quot; button's click.</p><p>The component's class is linked to the HTML markup via the <strong>templateUrl</strong> parameter in the <strong>@Component</strong> decorator section:<br/><strong>project/BBWT.Client/src/app/project/my-feature/my-entities.component.ts</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>templateUrl: </code><code>&quot;./my-entities.component.html&quot;</code></p></td></tr></tbody></table></div><h3 id="BBWT3-InformationforBeginners-4.AddanAngularmodule">4. Add an Angular module</h3><p>In the front-end code of BBWT3, along with having all files placed into the feature's folder, the feature oriented structure requires to create an Angular module. The module contains all feature's elements (components, services, interfaces etc.). In other words, an Angular module represents a feature. The module can be used just as a container for its elements or even to export the elements to other Angular modules.</p><p>In our example, the module is a container for its component, entity service and entity interface. It's a single page and it's elements are not supposed to be reusable by other modules. Create a module named &quot;&lt;your_feature&gt;Module&quot;:<br/><strong>project/BBWT.Client/src/app/project/my-feature/my-feature.module.ts</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>// Angular</code><br/><code>import { RouterModule } from </code><code>&quot;@angular/router&quot;</code><code>;</code><br/><code>import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from </code><code>&quot;@angular/core&quot;</code><code>;</code><br/><code>import { CommonModule } from </code><code>&quot;@angular/common&quot;</code><code>;</code><br/><code>import { FormsModule, ReactiveFormsModule } from </code><code>&quot;@angular/forms&quot;</code><code>;</code><br/><code>import { PrimeNgModule } from </code><code>&quot;@primeng&quot;</code><code>;</code><br/> <br/><code>// BBWT</code><br/><code>import { GridModule } from </code><code>&quot;@features/grid&quot;</code><code>;</code><br/><code>import { FilterModule } from </code><code>&quot;@features/filter&quot;</code><code>;</code><br/><code>import { BbCardModule } from </code><code>&quot;@features/bb-card&quot;</code><code>;</code><br/> <br/><code>import { MyEntitiesComponent } from </code><code>&quot;./my-entities.component&quot;</code><code>;</code><br/><code>import { MyEntityService } from </code><code>&quot;./my-entity.service&quot;</code><code>;</code><br/> <br/><code>// Links components to the pages routes</code><br/><code>const</code> <code>routes = [</code><br/><code>    </code><code>{ path: </code><code>&quot;&quot;</code><code>, component: MyEntitiesComponent, data: { title: </code><code>&quot;My Entities&quot;</code> <code>} }</code><br/><code>];</code><br/> <br/><code>@NgModule({</code><br/><code>    </code><code>declarations: [MyEntitiesComponent],</code><br/><code>    </code><code>imports: [</code><br/><code>        </code><code>CommonModule, FormsModule, ReactiveFormsModule,</code><br/><code>        </code><code>PrimeNgModule,</code><br/> <br/><code>        </code><code>// BBWT modules</code><br/><code>        </code><code>GridModule, FilterModule, BbCardModule,</code><br/> <br/><code>        </code><code>RouterModule.forChild(routes)</code><br/><code>    </code><code>],</code><br/><code>    </code><code>providers: [MyEntityService],</code><br/><code>    </code><code>schemas: [CUSTOM_ELEMENTS_SCHEMA]</code><br/><code>})</code><br/><code>export </code><code>class</code> <code>MyFeatureModule { }</code></p></td></tr></tbody></table></div><p><br/></p><p>In the example above, pay attention to this part:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>// Links components to the pages routes</code><br/><code>const</code> <code>routes = [</code><br/><code>    </code><code>{ path: </code><code>&quot;&quot;</code><code>, component: MyEntitiesComponent, data: { title: </code><code>&quot;My Entities&quot;</code> <code>} }</code><br/><code>];</code></p></td></tr></tbody></table></div><p class="auto-cursor-target">Here we define a relative route to the component's page within the module. The full route is &lt;route_to_the_module&gt; + &quot;/&quot; + &lt;relative_route&gt;. For our case it's &quot;app/my-feature&quot; + &quot;/&quot; + &quot;&quot; = &quot;app/my-feature&quot;. It means we link our grid UI component to a <em>base </em>route of the module.</p><p><br/></p><hr/><p>Lets have a look at one more example to explain how module routing works (it's not included into our feature's sample code). If we decide to extend our feature with a new component EntitiesDashboardComponent then, in order the component to be shown on some page, we need to link it to a route. The MyEntitiesComponent, as said above, is already linked to a <em><strong>base </strong></em>route of the module. Then we will link the EntitiesDashboardComponent to a <em><strong>sub </strong></em>route: &quot;app/my-feature&quot; + &quot;/&quot; + &quot;dashboard&quot; = &quot;app/my-feature/dashboard&quot;. Finally we will have this routes applied to the module:</p><ul><li>&quot;app/my-feature&quot; (a page with MyEntitiesComponent)</li><li>&quot;app/my-feature/dashboard&quot; (a page with EntitiesDashboardComponent)</li></ul><p>Then we need to add a new line into the routes array:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>{ path: </code><code>&quot;dashboard&quot;</code><code>, component: EntitiesDashboardComponent, data: { title: </code><code>&quot;Entities Dashboard&quot;</code> <code>} }</code></p></td></tr></tbody></table></div><hr/><h3 id="BBWT3-InformationforBeginners-5.Registeryourmoduleinmodulesrouting"><br/>5. Register your module in modules routing</h3><p>In our project, the modules of built-in features are linked to the main application module as <a class="external-link" href="https://angular.io/guide/lazy-loading-ngmodules" rel="nofollow">lazy loading feature modules</a> by default. In our example we will follow this approach. </p><p>Add the line into the <strong>project-routing.ts</strong> to define how to link the module, as shown here:<br/><strong>project/BBWT.Client/src/app/project/project-routing.ts</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>export </code><code>const</code> <code>ProjectRoutes = [</code><br/><code>    </code><code>{ path: </code><code>&quot;my-feature&quot;</code><code>, loadChildren: () =&gt; import(</code><code>&quot;./my-feature/my-feature.module&quot;</code><code>).then(m =&gt; m.MyFeatureModule) },</code><br/><code>];</code></p></td></tr></tbody></table></div><p class="auto-cursor-target">Having this defined, Angular will associate &quot;my-feature&quot; root and all the feature's sub-roots with the MyFeatureModule and its components. In our example, when user requests a page with a URL containing a route &quot;app/my-feature&quot; Angular will open a page with MyEntitiesComponent loaded.</p><h2 id="BBWT3-InformationforBeginners-Applicationrun-time">Application run-time</h2><p>Now that you've completed the back-end and the front-end parts, you can start your application. More details on how to start a BBWT3 application, read <a href="https://wiki.bbconsult.co.uk/pages/viewpage.action?pageId=65077468#Building,Running&amp;Publishing-building" rel="nofollow">here</a> (&quot;Building and Running&quot; section)</p><p>When you've started the application, the first page you will see in browser is the login page. The next step(s) will require administrator's credentials, therefore you should better log in under <a class="external-link" href="mailto:demo-admin@bbconsult.cu.uk" rel="nofollow">demo-admin@bbconsult.co.uk</a> demo account, which includes both super admininstrator and system admininstrator roles.<br/>See login credentials in <a class="external-link" href="https://bw.bbconsult.co.uk/" rel="nofollow">Bitwarden</a> (&quot;BBWT3 Test Site&quot; collection).</p><h3 id="BBWT3-InformationforBeginners-1.Addfeature&#39;spagetomenu">1. Add feature's page to menu</h3><p>The feature's page is already accessible by this route &quot;/app/my-feature&quot;.</p><p>If you need to get to the page via main menu of the application, follow these steps:</p><ul><li><p>log in under <a class="external-link" href="mailto:demo-admin@bbconsult.cu.uk" rel="nofollow">demo-admin@bbconsult.co.uk</a> (or <a class="external-link" href="mailto:superadmin@bbconsult.co.uk" rel="nofollow">superadmin@bbconsult.co.uk</a>)</p></li><li>go to the menu configuration page: Menu &gt; Operational Admin &gt; Menu Configuration (&quot;/app/menu&quot; route)</li><li>Click &quot;Add&quot; button to add a menu item. Let's add it inside the &quot;Welcome Page&quot; as it's shown on this picture:<br/><br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="attachments/85493017/85493021.png" data-image-src="attachments/85493017/85493021.png" data-unresolved-comment-count="0" data-linked-resource-id="85493021" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-7-4_15-21-20.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493017" data-linked-resource-container-version="1"></span></span></li></ul><ul><li>Reload the page and check the menu. It should include a new item:<br/><br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="94" src="attachments/85493017/85493022.png" data-image-src="attachments/85493017/85493022.png" data-unresolved-comment-count="0" data-linked-resource-id="85493022" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-1-9_12-2-1.png" data-base-url="https://wiki.bbconsult.co.uk" data-linked-resource-content-type="image/png" data-linked-resource-container-id="85493017" data-linked-resource-container-version="1"></span></span></li></ul><p>On application start, the menu configuration is initiated from a repository file &quot;project/BBWT.Server/data/menu/main-menu.json&quot;. After you edit the menu in run-time the file is update with a new configuration. Then you should commit it into your repository. This method, when the configuration is stored in repository, allows us to synchronize the menu through all application instances - local developer's deployments and test server deployments.</p><p><br/></p><p><br/></p><hr/><p>We've completed all the steps!</p><p>Now lets go to the feature's page and check it out. The page should look similar to the <a href="https://wiki.bbconsult.co.uk/display/BLUEB/BBWT3+Explained+to+Beginners#BBWT3ExplainedtoBeginners-gridview" rel="nofollow">provided demo view</a> above!</p><p>All the code samples of the feature are workable and placed into <a class="external-link" href="https://gitlab.bbconsult.co.uk/blueberry/bbwt3/tree/feature/beginner_sample" rel="nofollow">this GIT branch</a> of the BBWT3 repository.</p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493017/85493018.png">image2020-8-30_9-6-13.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493017/85493019.png">image2020-4-5_9-30-0.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493017/85493020.png">image2019-12-17_14-59-20.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493017/85493021.png">image2020-7-4_15-21-20.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/85493017/85493022.png">image2020-1-9_12-2-1.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 27, 2020 10:56</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
