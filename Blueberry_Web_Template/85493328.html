<!--
title: A8:2017 - Insecure Deserialization
description: 
published: true
date: 2020-12-02T14:49:19.261Z
tags: 
editor: ckeditor
dateCreated: 2020-11-27T11:01:28.845Z
-->

<h1>Blueberry Group : A8:2017 - Insecure Deserialization&nbsp;</h1>
<p>Created by Jason Cozza on Sep 22, 2020</p>
<h1>Overview</h1>
<p>According to&nbsp;<a href="https://www.owasp.org/index.php/Deserialization_Cheat_Sheet">OWASP</a>, “Serialisation is the process of turning some object into a data format that can be restored later. People often serialise objects in order to save them to storage, or to send as part of communications. Deserialization is the reverse of that process – taking data structured from some format, and rebuilding it into an object.”</p>
<p>Insecure deserialization often leads to remote code execution. Even if deserialization flaws do not result in remote code execution, they can be used to perform attacks, including replay attacks, injection attacks, and privilege escalation attacks.</p>
<h1>Example</h1>
<p>A PHP forum uses PHP object serialization to save a "super" cookie, containing the user's user ID, role, password hash, and other state:</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td><code>a:4:{i:0;i:132;i:1;s:7:"Mallory";i:2;s:4:"user";</code><br><code>i:3;s:32:"b6a8b3bea87fe0e05022f8f3c88bc960";}</code></td>
      </tr>
    </tbody>
  </table>
</figure>
<p>An attacker changes the serialized object to give themselves admin privileges:</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td><code>a:4:{i:0;i:1;i:1;s:5:"Alice";i:2;s:5:"admin";</code><br><code>i:3;s:32:"b6a8b3bea87fe0e05022f8f3c88bc960";}</code></td>
      </tr>
    </tbody>
  </table>
</figure>
<h1>How BBWT3 Mitigates This Vulnerability</h1>
<ul>
  <li>Uses where possible JSON files instead of more complex data formats.</li>
  <li>Using named parameters.<br><br>&nbsp;</li>
</ul>
<p>Using JSON files means that the input format is sufficiently simple that it is hard for an attacker to create a trick against the web application.</p>
<p>Through the use of the Data Transfer Object layer, we specify explicitly and in a degree of detail what types of data we expect to receive from a particular call. Ignoring anything else that isn't expected.</p>
<h1>Other Resources</h1>
<p>OWASP 2017 full details -&nbsp; page 14 of&nbsp;<a href="https://www.owasp.org/images/7/72/OWASP_Top_10-2017_%28en%29.pdf.pdf">https://www.owasp.org/images/7/72/OWASP_Top_10-2017_%28en%29.pdf.pdf</a></p>
<p>Document generated by Confluence on Nov 27, 2020 10:56</p>
<p><a href="http://www.atlassian.com/">Atlassian</a></p>
